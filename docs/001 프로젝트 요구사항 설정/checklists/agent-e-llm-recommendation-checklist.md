# Agent E 체크리스트: 상품 추천 설명 LLM

## 작업 범위

- 상품 상세 기반 추천 설명 생성
- 외부 LLM 호출 실패 시 폴백 응답

## 선행조건

- [ ] `00-common-gate-checklist.md` 확인 완료
- [ ] Agent A의 상품 상세 응답 계약 확인
- [ ] 환경변수 기반 키 주입 방식 합의

## 구현 체크리스트

### Domain

- [ ] 추천 설명 생성 입력/출력 모델 정의
- [ ] 금칙어/민감정보 차단 정책 반영

### Application

- [ ] 추천 설명 생성 유스케이스 구현
- [ ] 타임아웃/예외 발생 시 폴백 로직 구현
- [ ] 동일 요청 캐시 정책(옵션) 구현

### Interface

- [ ] `GET /api/products/{productId}/recommendation` 구현
- [ ] 폴백 응답 형태(기본 추천 문구) 고정

### Infrastructure

- [ ] LLM 클라이언트 어댑터 구현
- [ ] 프롬프트 템플릿 분리(리소스 또는 상수)
- [ ] 호출 로깅 시 민감정보 마스킹 처리

### Test

- [ ] 서비스 테스트: 정상 응답
- [ ] 서비스 테스트: 타임아웃/예외 폴백
- [ ] API 테스트: 추천 엔드포인트
- [ ] 어댑터 테스트: 외부 응답 파싱 실패 처리

## 완료 산출물

- [ ] 환경변수 키 목록 및 설정 가이드 문서화
- [ ] 프롬프트 버전/폴백 정책 문서화

## 머지 전 확인

- [ ] `./gradlew test` 통과
- [ ] Agent F와 함께 장애 시나리오(LLM 실패) 회귀 확인
